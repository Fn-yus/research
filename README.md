# 研究の概要

## 切り取り

いったん後回し

### 2019/09/07

Long-needleに関しては完了

## 二値化

## 直線の検出

## 数値化

# 課題

## ①針を完全に除去しきれず、直線の検出の際に影響が出ている

### 2019/08/28

needleの検出閾値の下限値を下げた

## ②影(縁)の映り込み

### 2019/08/28

thesh（二値化）ではなく、canny（エッジ検出）を試してみる　→微妙だった

画像のトリミング範囲を変更し、とりあえず右側の幅5ピクセル分の影は無視することに

### 2019/08/31

thresholdやhoughlinesのパラメータ値を変更し、陰の除去に成功

## ③太線のみをどう認識するか

### 2019/08/28

二値化して、白→黒への移り変わりと黒→白への移り変わりの回数で判断できる？

→いろいろやってたら太線の認識はハフ変換でとりあえずできたが、汎用性はなさそう

### 2019/08/31

cannyから黒(255)の回数をカウントし、目盛りの太線から一致するものを取得という方法はどうか

### 2019/09/07

上のやり方でできた。

ハフ変換だと直線の検出がケースバイケースになってしまうので、こちらのやり方のほうが正確かつやりやすい気がする。

## ④幅が異なることに関して

### 2019/08/28

現状、一番右側の線が左にずれているという問題に加えて、幅がそれぞれ異なる（メーターが曲面のため）

→どう数値化していく？

### 2019/09/07

太線の目盛りを-3,-2,…2,3とし、それぞれの目盛り間の比で小数点以下を表すことにした。

今度は、実際の傾斜量とこの針の座標をどう合わせていくかが課題

## ⑤複数画像処理時のエラー処理について

### 2019/09/07 

Long-needleの画像は1007枚ある→すべてソートする？

とりあえず、今は途中でエラーが出て止まってしまうので、今度はそこから調べていきたい

### 2019/09/21

端をかなりシビアに切り取りすぎている→要修正

### 2019/09/22

修正した

目盛りを認識する際は、端を白くすることで対応

## ⑥一番外側の太線より外側にある目盛りの数値化

### 2019/09/21
真ん中の目盛り幅からの減少率を当てはめる？

### 2019/09/22

当てはめた

# 測地雑誌会発表後進捗

## Cross-needle

## 精度向上

### 目盛りの位置を検出する際に、条件に一致する組を一組選んでいたが、全て選び平均をとるようにした

### 針の色の範囲を広げた

### 画像の作成時刻の秒が10秒より小さければ除外（傾斜をつけ切れていない場合があるため） -> 大幅な精度向上